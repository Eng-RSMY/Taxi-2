{% extends '@WebProfiler/Profiler/layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        <span class="icon"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAD7AAAA+wFieMcIAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPxQTFRF////AAD/AICAQICASW2SQGCAOXGOM2aAO2KJPGmHPWaFOWiOPmqNOmuMQGiHPmSDPmSLOmaKO2mJPWeMO2uIPmaIOmqKPmiHPWaKPGaLPmeIP2qJPWmIPmeJPWiKPWeJPmeKPmiJPGmJPWmKPWiJPWmJPGeIPGmJPmmKPWiJPWeJPmiJPGeKPmiJPWmJPGiKPWiJPWiJPWiJPWiJPGiJPmiJPWiJPWiJPWiJPWiKPGeJPWiKPWiJPWmJPWiJPGiJPGiKPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiIPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJGJWjvwAAAFN0Uk5TAAECBAcICQoNERkbHR8gISEjJyorLTAxMjc+QUtSU1RXW2FkbHByd3x9ipGUlZeYmqKkpqmqq7G1vb6/wcPN09fY2tzd4OXq7O7x8vb5+vv8/f4toYE0AAABEElEQVQYGc3Ba1vBABgG4GdDK6wcSjNKGbMcopyZNufYJvb+//8SdXHVbD67b5whjsMJ6bq+2ej1NNwFW0SzdntG1ArCRWhOncjVLRDp0DyEI76BLQkfZN8DkOyBD04KlR++rLdn7JRJgdNwevM5v8MvbjqEQ5ReZXrCXpWi+IvPNEh6ty+xJ1Ejw2MvNaat+OMLDuK0NU5hhynZRiUrCvhHELMVwy4xAHLU4+GK71EOiJkjDh64kRlDkUR4EqmI7pKBJ2bZxULFCeoCEw0naBM01xfwxK2byFMBngqUh1+zBHgQLM0PJFamzMIFK5urBLaSOhlqrepQUw3Sk/gRUPoGHTH6SgAHbPjaIczibHwDSkQxxVcRz4IAAAAASUVORK5CYII=" alt=""/></span>
        <span class="sf-toolbar-status">{{ collector.getMessageCount() }}</span>
    {% endset %}

    {% set text %}
    <div class="sf-toolbar-info-piece">
        <div class="sf-toolbar-info-piece">
            <b>Success</b>
            <span>{{ collector.getSuccessCount() }}</span>
        </div>
        <div class="sf-toolbar-info-piece">
            <b>Failure</b>
            <span>{{ collector.getFailureCount() }}</span>
        </div>
        <div class="sf-toolbar-info-piece">
            <b>Canonical</b>
            <span>{{ collector.getCanonicalCount() }}</span>
        </div>
    </div>
    {% endset %}

    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { 'link': true }) }}
{% endblock %}

{% block head %}
    {{ parent() }}
    {# Optional. Here you can link to or define your own CSS and JS contents. #}
    {# Use {{ parent() }} to extend the default styles instead of overriding them. #}
{% endblock %}

{% block menu %}
    {# This left-hand menu appears when using the full-screen profiler. #}
    <span class="label {% if (collector.getMessageCount() == 0) %}disabled{% endif %}">
        <span class="icon"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAD7AAAA+wFieMcIAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPxQTFRF////AAD/AICAQICASW2SQGCAOXGOM2aAO2KJPGmHPWaFOWiOPmqNOmuMQGiHPmSDPmSLOmaKO2mJPWeMO2uIPmaIOmqKPmiHPWaKPGaLPmeIP2qJPWmIPmeJPWiKPWeJPmeKPmiJPGmJPWmKPWiJPWmJPGeIPGmJPmmKPWiJPWeJPmiJPGeKPmiJPWmJPGiKPWiJPWiJPWiJPWiJPGiJPmiJPWiJPWiJPWiJPWiKPGeJPWiKPWiJPWmJPWiJPGiJPGiKPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiIPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJPWiJGJWjvwAAAFN0Uk5TAAECBAcICQoNERkbHR8gISEjJyorLTAxMjc+QUtSU1RXW2FkbHByd3x9ipGUlZeYmqKkpqmqq7G1vb6/wcPN09fY2tzd4OXq7O7x8vb5+vv8/f4toYE0AAABEElEQVQYGc3Ba1vBABgG4GdDK6wcSjNKGbMcopyZNufYJvb+//8SdXHVbD67b5whjsMJ6bq+2ej1NNwFW0SzdntG1ArCRWhOncjVLRDp0DyEI76BLQkfZN8DkOyBD04KlR++rLdn7JRJgdNwevM5v8MvbjqEQ5ReZXrCXpWi+IvPNEh6ty+xJ1Ejw2MvNaat+OMLDuK0NU5hhynZRiUrCvhHELMVwy4xAHLU4+GK71EOiJkjDh64kRlDkUR4EqmI7pKBJ2bZxULFCeoCEw0naBM01xfwxK2byFMBngqUh1+zBHgQLM0PJFamzMIFK5urBLaSOhlqrepQUw3Sk/gRUPoGHTH6SgAHbPjaIczibHwDSkQxxVcRz4IAAAAASUVORK5CYII=" alt=""/></span>
        <strong>GCM</strong>
    </span>
{% endblock %}

{% block panel %}
    <h2>GCM Status</h2>
    <table summary="Show gcm status">
        <thead>
        <tr>
            <th>Success</th>
            <th>Failure</th>
            <th>Canonical</th>
            <th>Total</th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ collector.getSuccessCount() }}</td>
                <td>{{ collector.getFailureCount() }}</td>
                <td>{{ collector.getCanonicalCount() }}</td>
                <td>{{ collector.getMessageCount() }}</td>
            </tr>
        </tbody>
    </table>

    <h2>Messages</h2>
    <table summary="Show gcm messages">
        <thead>
        <tr>
            <th>Number</th>
            <th>ID</th>
            <th>GCM ID</th>
            <th>Device Id</th>
            <th>Status</th>
            <th>Error</th>
            <th>Data</th>
        </tr>
        </thead>
        <tbody>
        {% if collector.getMessageCount() == 0 %}
            <tr><td colspan="7">No Messages</td></tr>
        {% else %}
            {% for i, data in collector.getMessages() %}
                <tr>
                    <td>{{ i }}</td>
                    <td>{{ data.getId() }}</td>
                    <td>{{ data.getGcmId }}</td>
                    <td>{{ data.getDevice().getId() }}</td>
                    <td>{{ data.getStatus() }}</td>
                    <td>{{ data.getError() }}</td>
                    <td>
                        {% for key, value in data.getData() %}
                            {{ key }}: {{ value }}<br>
                        {% endfor %}
                    </td>
                </tr>
            {% endfor %}
        {% endif %}
        </tbody>
    </table>
{% endblock %}